// room script file

function room_Load (){
  cMick.x = 100;
  cMick.y = 615; 
  cCrazyLarry.FaceLocation(400, 150);
  oLaser.SetView(7);
  oLaser.Animate(0, 5, eRepeat, eNoBlock, eForwards);
}

  
//Exiting the room- three presses on the 3rd button needed
function oEscapeButton_Look(){
  cMick.Say("Maybe that's the way out of here");
}

int counter = 0;
function oEscapeButton_Interact()
{
  if (oLaser.Visible) {
    cMick.Say("I can't reach that button while the laser is still on...");
    return;
  }
  
  cMick.Walk(724, 480, eBlock);
  aButton_click.Play(eAudioPriorityHigh);
  
  counter ++;
  if (counter == 1) {
    cMick.Say("Hmm, what just happened?");
  }
  if (counter == 2) {
    cMick.Say("Why doesn't it work?!");
  }
  if (counter > 2) {
    bgAudio.Stop();
    oLaserShot.SetView(7, 2, 0);
    oLaserShot.Visible = true;
    aBang.Play(eAudioPriorityHigh);
    oLaserShot.Animate(2, 5, eOnce, eBlock);
    oLaserShot.Visible = false;
    cMick.ChangeView(8);
    cMick.Animate(0, 4, eOnce, eBlock);
    cMick.SayBackground("AAHHHH!!!");
    aDeath_sound.Play(eAudioPriorityHigh);
    
    justDied = true;
    gameEnd = true;
    player.ChangeRoom(1);
  }
}

function room_FirstLoad()
{
  RemoveWalkableArea(2);
}

function room_AfterFadeIn()
{
  cMick.Walk(200, 505, eBlock);
  cCrazyLarry.Say("..and then I saw all three of them at the same time!");
  cCrazyLarry.Say("I'm telling you! Fire, ice AND thunder. All three birds!");
  cCrazyLarry.Say("You don't believe me Gunther? You never..");
  cCrazyLarry.Say("AHH!!");
  cCrazyLarry.FaceLocation(cMick.x,  cMick.y);
  cCrazyLarry.Say("Where did you come from?");
  cMick.Say("The door right there.. Who are you?");
  cCrazyLarry.Say("Larry's the name, friend.");
  cCrazyLarry.Say("And this is my loyal servant Gunther, who should really work on his attitude!");
  cMick.Say("Gunther..? Oh never mind, how do we get out of here?");
  cCrazyLarry.Say("Ha ha ha! Do you think if I had the answer to that I'd still be here??");
  cCrazyLarry.Say("That laser had been working nonstop since I got here..");
  cCrazyLarry.Say("And your door was locked up until now.");
  cCrazyLarry.Say("So get cozy, friend..");
  cCrazyLarry.Say("We're gonna be here for a while..");
  cCrazyLarry.Say("Come on, I saved you a sit next to Gunther.");
}

function oLaser_Look()
{
  cMick.Say("A laser beam is blocking my way to that red button...");
  cMick.Say("I must press the red button!");
}

function oLaser_Interact()
{
  cMick.Say("I have a bad feeling about this...");
  cCrazyLarry.Say("I always have a bad feeling...");
}

function hApple_Look()
{
  cMick.Say("A giant apple...");
  cMick.Say("Why are there giant fruit scattered all over this place?!");
  cCrazyLarry.Say("And I don't even like apples...");
}

function hApple_Interact()
{
  cCrazyLarry.Say("Don't touch the apple!");
  cCrazyLarry.Say("This apple belongs to Gunther..");
  cCrazyLarry.Say("You sure love your apple, right Gunther?");
}
